<!DOCTYPE html>
<html>

<head>
    <title>IllumiRun</title>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache, must-revalidate" />
    <meta http-equiv="expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="stylesheet" href="style/mycss.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="camera">
            <img src="./image/camera.png" height="80" width="80">
            <input id="btn-upload" class="input-upload" type="file" capture="camera" accept="image/*">
        </div>
        <div class="txt-activity-rule">
            <a onclick="document.getElementById('dialog').style.display='block'">活动规则</a>
        </div>
        <div id="dialog" class="modal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <p>世界只有一个，地球只有一个</p>
                    <p>人类有N中，你是哪一种</p>
                    <p><strong>我们是荧光人类</strong></p>
                    <p>赶紧拿起手机拍照吧，或者从相册中</p>
                    <p>选取一张，点击你喜欢的模板、道具</p>
                    <p>、口号从现在开始，你就是荧光人类的主角</p>
                    <p>，带上你的小伙伴一起疯狂夜跑吧</p>
                </div>
                <div class="modal-btn-close">
                    <img onclick="document.getElementById('dialog').style.display='none'" src="./image/img_close.png" height="28" width="30" />
                </div>
            </div>
        </div>
        <img id="img-preview" class="hidden" src="">
</body>
<script type="text/javascript">
(function($) {
    $('#btn-upload').on('change', function() {
        var input = $(this)[0];

        if (input.files && input.files[0]) {

            var reader = new FileReader();
            reader.onload = function(e) {
                $('#img-preview').attr('src', e.target.result);
                //upload the file here
                $.post('/image/upload', {
                    'image': e.target.result
                }, function(data) {
                    alert(data);
                    //TODO 若完成则跳转
                });
            }

            reader.readAsDataURL(input.files[0]);
        }
    });
})(jQuery);
</script>

</html>